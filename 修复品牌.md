##### 修复品牌风格代码

````python
# 进入指定python版本
source ~/.virtualenvs/ag-adm/bin/activate

import json
import logging
import os
import sys

import django

BASE_DIR = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
sys.path.append(BASE_DIR)
os.environ["DJANGO_SETTINGS_MODULE"] = "config.settings"
django.setup()

from apps.ads_app.services import update_brand_property  # noqa isort:skip
from apps.ag_common.models.api import AppBrandProperty  # noqa isort:skip
from apps.ag_common.models.api import AppBrandStyle  # noqa isort:skip
from apps.ag_common.models.api import StyleTag  # noqa isort:skip

XLS_FILE_DIR = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))


def update_brand_style():
    app_brand_style = [
        {"app_brand_id": 4879375, "style": "射击"},
        {"app_brand_id": 4879828, "style": "日韩系,动漫"},
        {"app_brand_id": 4880166, "style": "消除"},
        {"app_brand_id": 4879984, "style": "模拟,动漫,魔幻"},
        {"app_brand_id": 4879335, "style": "模拟,仙侠"},
        {"app_brand_id": 4880679, "style": "消除"},
        {"app_brand_id": 4880028, "style": "其他"},
        {"app_brand_id": 4879214, "style": "消除"},
        {"app_brand_id": 4879395, "style": "模拟,动漫"},
        {"app_brand_id": 4879793, "style": "模拟,战争"},
        {"app_brand_id": 4879693, "style": "传奇"},
        {"app_brand_id": 4879688, "style": "模拟"},
        {"app_brand_id": 4879450, "style": "消除"},
        {"app_brand_id": 4879542, "style": "仙侠"},
        {"app_brand_id": 4879442, "style": "塔防"},
        {"app_brand_id": 4879997, "style": "战争"},
        {"app_brand_id": 4880249, "style": "传奇"},
        {"app_brand_id": 4880213, "style": "消除"},
        {"app_brand_id": 4879349, "style": "传奇"},
        {"app_brand_id": 4879215, "style": "传奇"},
        {"app_brand_id": 4880548, "style": "传奇"},
        {"app_brand_id": 4879333, "style": "模拟"},
        {"app_brand_id": 4879445, "style": "模拟"},
        {"app_brand_id": 4879362, "style": "射击"},
        {"app_brand_id": 4879563, "style": "日韩系,动漫,模拟"},
        {"app_brand_id": 4879537, "style": "传奇"},
        {"app_brand_id": 4880136, "style": "其他"},
        {"app_brand_id": 4879562, "style": "战争"},
        {"app_brand_id": 4879281, "style": "战争"},
        {"app_brand_id": 4879532, "style": "战争"},
        {"app_brand_id": 4879594, "style": "神话,仙侠"},
        {"app_brand_id": 4879655, "style": "战争"},
        {"app_brand_id": 4879999, "style": "传奇"},
        {"app_brand_id": 4879359, "style": "消除"},
        {"app_brand_id": 4880347, "style": "三国,西游"},
        {"app_brand_id": 4880282, "style": "动漫,战争"},
        {"app_brand_id": 4879973, "style": "战争"},
        {"app_brand_id": 4879678, "style": "模拟,战争"},
        {"app_brand_id": 4880047, "style": "仙侠"},
        {"app_brand_id": 4880529, "style": "战争"},
        {"app_brand_id": 4879695, "style": "模拟"},
        {"app_brand_id": 4880300, "style": "传奇"},
        {"app_brand_id": 4879773, "style": "传奇"},
        {"app_brand_id": 4880262, "style": "仙侠,模拟"},
        {"app_brand_id": 4880054, "style": "射击"},
        {"app_brand_id": 4854692, "style": "其他"},
        {"app_brand_id": 3352, "style": "模拟"},
        {"app_brand_id": 4875891, "style": "动漫,模拟"},
        {"app_brand_id": 4878392, "style": "魔幻"},
        {"app_brand_id": 4867204, "style": "日韩系,动漫,模拟"},
        {"app_brand_id": 4876766, "style": "战争"},
        {"app_brand_id": 4877461, "style": "日韩系,动漫,战争"},
        {"app_brand_id": 4875940, "style": "消除"},
        {"app_brand_id": 4866066, "style": "其他"},
        {"app_brand_id": 4857538, "style": "模拟,仙侠"},
        {"app_brand_id": 4874553, "style": "战争"},
        {"app_brand_id": 4861988, "style": "战争"},
        {"app_brand_id": 4850546, "style": "模拟"},
        {"app_brand_id": 4860895, "style": "棋牌"},
        {"app_brand_id": 4866853, "style": "魔幻,战争"},
        {"app_brand_id": 4867895, "style": "模拟"},
        {"app_brand_id": 4872531, "style": "其他"},
        {"app_brand_id": 4875006, "style": "模拟"},
        {"app_brand_id": 4871858, "style": "棋牌"},
        {"app_brand_id": 4855905, "style": "射击"},
        {"app_brand_id": 4872153, "style": "仙侠"},
        {"app_brand_id": 4860907, "style": "其他"},
        {"app_brand_id": 4845211, "style": "模拟,仙侠"},
        {"app_brand_id": 4871120, "style": "都市,射击"},
        {"app_brand_id": 4879194, "style": "模拟"},
        {"app_brand_id": 4876417, "style": "模拟"},
        {"app_brand_id": 4872418, "style": "其他"},
        {"app_brand_id": 4874574, "style": "魔幻,战争"},
        {"app_brand_id": 4873347, "style": "其他"},
        {"app_brand_id": 4873777, "style": "模拟"},
        {"app_brand_id": 32407, "style": "其他"},

    ]

    style_tags_dict = dict(StyleTag.objects.values_list("name", "id"))
    num = 0
    for style in app_brand_style:
        num = num + 1
        style_name = style.get("style", "").split(",")
        style["app_brand_id"] = int(style["app_brand_id"])
        style_id = []
        for name in style_name:
            if not style_tags_dict.get(name, 0):
                logging.warning("{}:style不存在".format(style["app_brand_id"]))
            else:
                style_id.append(style_tags_dict[name])
        style["style"] = style_id
        update_brand_property(style["app_brand_id"], style)
        property_object = AppBrandProperty.objects.filter(
            app_brand_id=style["app_brand_id"], property_type=3, property__in=style_id
        )
        style_object = AppBrandStyle.objects.filter(app_brand_id=style["app_brand_id"], style_id__in=style_id).values(
            "app_brand_id", "style_id"
        )
        if not property_object:
            print("{}:没有成功写入AppBrandProperty".format(style["app_brand_id"]))
        if not style_object:
            print("{}:没有成功写入AppBrandStyle".format(style["app_brand_id"]))
        if property_object and style_object:
            style["success"] = "√"
        else:
            style["success"] = "x"
    return app_brand_style


if __name__ == "__main__":
    app_brand_style = update_brand_style()
    with open(XLS_FILE_DIR + "/brand.json", "w") as f:
        json.dump(app_brand_style, f)

````

